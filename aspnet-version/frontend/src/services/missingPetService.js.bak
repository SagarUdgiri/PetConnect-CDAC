import axios from 'axios';

const BASE_URL = 'http://localhost:8080';

export const createMissingPetReport = async (userId, reportData) => {
    const response = await axios.post(`${BASE_URL}/api/missing-pets/${userId}`, reportData, {
        headers: {
            Authorization: `Bearer ${localStorage.getItem('token')}`,
        },
    });
    return response.data;
};

export const getNearbyMissingPets = async (userId, radius = 10.0) => {
    const response = await axios.get(`${BASE_URL}/api/missing-pets/nearby/${userId}`, {
        params: { radius },
        headers: {
            Authorization: `Bearer ${localStorage.getItem('token')}`,
        },
    });
    return response.data;
};

export const contactReporter = async (reportId, message) => {
    const response = await axios.post(`${BASE_URL}/api/missing-pets/${reportId}/contact`, { message }, {
        headers: {
            Authorization: `Bearer ${localStorage.getItem('token')}`,
        },
    });
    return response.data;
};

export const getContacts = async (reportId) => {
    const response = await axios.get(`${BASE_URL}/api/missing-pets/${reportId}/contacts`, {
        headers: {
            Authorization: `Bearer ${localStorage.getItem('token')}`,
        },
    });
    return response.data;
};

const missingPetService = {
    createMissingPetReport,
    getNearbyMissingPets,
    contactReporter,
    getContacts,
};

export default missingPetService;
